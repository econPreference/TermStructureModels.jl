<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Forecasting · TermStructureModels.jl</title><meta name="title" content="Forecasting · TermStructureModels.jl"/><meta property="og:title" content="Forecasting · TermStructureModels.jl"/><meta property="twitter:title" content="Forecasting · TermStructureModels.jl"/><meta name="description" content="Documentation for TermStructureModels.jl."/><meta property="og:description" content="Documentation for TermStructureModels.jl."/><meta property="twitter:description" content="Documentation for TermStructureModels.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TermStructureModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li><a class="tocitem" href="../notations/">Notations</a></li><li><a class="tocitem" href="../estimation/">Estimation</a></li><li><a class="tocitem" href="../inference/">Statistical Inference</a></li><li class="is-active"><a class="tocitem" href>Forecasting</a><ul class="internal"><li><a class="tocitem" href="#Baseline-Forecasts"><span>Baseline Forecasts</span></a></li><li><a class="tocitem" href="#Scenario-Forecasts"><span>Scenario Forecasts</span></a></li></ul></li><li><a class="tocitem" href="../output/">Utilization of the Output</a></li><li><a class="tocitem" href="../others/">Other Forms of the Model</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Forecasting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Forecasting</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/econPreference/TermStructureModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/econPreference/TermStructureModels.jl/blob/main/docs/src/scenario.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Forecasting"><a class="docs-heading-anchor" href="#Forecasting">Forecasting</a><a id="Forecasting-1"></a><a class="docs-heading-anchor-permalink" href="#Forecasting" title="Permalink"></a></h1><p>We have two kinds of forecasts.</p><ol><li><a href="#Baseline-Forecasts">Baseline Forecasts</a></li><li><a href="#Scenario-Forecasts">Scenario Forecasts</a> (Scenario Analysis)</li></ol><p>All of two forecasts are conditional forecasts, because they are based on information in data. The difference is that the scenario forecast assumes additional scenarios that describe future paths of some variables.</p><p>Baseline forecasts and scenario forecasts can be represented either as the posterior distribution of predicted objects or as the posterior distribution of conditional expectations of predicted objects. To summarize:</p><ol><li>Posterior Distribution of Predicted Objects<ul><li>In other words, Distribution of future objects conditional on past observations and the scenario</li><li>Function: <a href="../api/#TermStructureModels.conditional_forecasts-Tuple{Vector{T} where T, Any, Any, Any, Any, Any, Any}"><code>conditional_forecasts</code></a></li></ul></li><li>Posterior Distribution of Conditional Expectations of Predicted Objects<ul><li>In other words, Posterior Distribution of &quot;E[future object|past obs, scenario, parameters]&quot;</li><li>Function: <a href="../api/#TermStructureModels.scenario_analysis-Tuple{Vector{T} where T, Any, Any, Any, Any, Any, Any}"><code>scenario_analysis</code></a></li></ul></li></ol><p>In this summary, for baseline forecasts, the scenario is the empty set.</p><p>The first one is the full Bayesian treatment, so it is mathematically strict. However, it can be difficult to derive meaningful implications from the prediction because of its wide prediction intervals. The second one consider only parameter uncertainty, so it underestimates the prediction uncertainty. However, it is appropriate when users make decisions based on the expected path of future variables. <strong>We recommend the second version</strong> (<code>scenario_analysis</code>).</p><p>The required inputs and the type of the output are the same between <code>conditional_forecasts</code> and <code>scenario_analysis</code>. That is,</p><pre><code class="language-julia hljs">projections = conditional_forecasts(S::Vector, τ, horizon, saved_params, yields, macros, tau_n;
                                    mean_macros::Vector=[],
                                    data_scale=1200)</code></pre><p>and</p><pre><code class="language-julia hljs">projections = scenario_analysis(S::Vector, τ, horizon, saved_params, yields, macros, tau_n;
                                mean_macros::Vector=[],
                                data_scale=1200)</code></pre><p><code>projections::Vector{Forecast}</code> contains the results of the forecasting. <code>τ</code> is a vector, and the term premium of <code>τ[i]</code>-bond is forecasted for each <code>i</code>. If <code>τ</code> is set to <code>[]</code>, the term premium is not forecasted. <code>horizon</code> is the forecasting horizon. <code>horizon</code> should not be smaller than <code>length(S)</code>. <code>saved_params::Vector{Parameter}</code> is the output of <a href="https://econpreference.github.io/TermStructureModels.jl/dev/estimation/#Step-2.-Sampling-the-Posterior-Distribution-of-Parameters"><code>posterior_sampler</code></a>.</p><p>Users can use the same <code>yields</code>, <code>tau_n</code> and <code>macros</code> they employed when executing <code>posterior_sampler</code>. If one wishes to compute conditional forecasts using observations up to a certain point, they can simply use <code>yields</code> and <code>macros</code> from the initial period up to that point. However, parameter uncertainty is incorporated independently of <code>yields</code> and <code>macros</code> through <code>saved_params</code>.</p><p>If you use demeaned macro data, option <code>mean_macros</code> is useful. If the sample mean of macro data is specified as the input value for <code>mean_macros</code>, <code>projections</code> contains conditional forecasts of non-demeaned macro variables. The sample mean of macro data can be calculated as follows.</p><pre><code class="language-julia hljs">mean_macros = mean(raw_macros_data, dims=1)[1, :]</code></pre><div class="admonition is-warning"><header class="admonition-header">Option `mean_macros`</header><div class="admonition-body"><p>If macro variables are not demeaned, ignore option <code>mean_macros</code>.</p></div></div><p><code>S</code> determines whether we are computing a baseline forecast or a scenario forecast. How <code>S</code> is set will be described in the following sections.</p><h2 id="Baseline-Forecasts"><a class="docs-heading-anchor" href="#Baseline-Forecasts">Baseline Forecasts</a><a id="Baseline-Forecasts-1"></a><a class="docs-heading-anchor-permalink" href="#Baseline-Forecasts" title="Permalink"></a></h2><p>Do</p><pre><code class="language-julia hljs">S = []</code></pre><p>It sets a scenario to an empty set, so the package calculate baseline forecasts.</p><h2 id="Scenario-Forecasts"><a class="docs-heading-anchor" href="#Scenario-Forecasts">Scenario Forecasts</a><a id="Scenario-Forecasts-1"></a><a class="docs-heading-anchor-permalink" href="#Scenario-Forecasts" title="Permalink"></a></h2><p><code>S</code> should be <code>Vector{Scenario}</code>. <code>S</code> can be initialized by</p><pre><code class="language-julia hljs">S = Vector{Scenario}(undef, len)</code></pre><p><code>len</code> is the length of <code>S</code>. For example, if the scenario is assumed for the next 5 time periods, <code>len=5</code>.</p><p><code>S[i]</code> represents the scenario for future variables at time <code>T+i</code>, where <code>T</code> refers to the time of the last observation in <code>macros</code> and <code>yields</code>. The type of <code>S[i]</code> is <code>Scenario</code>, and struct <code>Scenario</code> has two fields: <code>combinations::Matrix</code> and <code>values::Vector</code>. The fields in <code>S[i]</code> are implicitly defined by</p><pre><code class="language-julia hljs">S[i].combination*[yields[T+i,:]; macros[T+i, :]] == S[i].values</code></pre><p><code>[yields[T+i,:]; macros[T+i, :]]</code> is a predicted variable that is not observed. Scenario forecasts are calculated assuming that the above equation holds at time <code>T+i</code>, based on <code>S[i]</code> set by users. The number of rows in <code>S[i].combination</code> and the length of <code>S[i].values</code> are the same, and this length represents the number of scenarios assumed at time <code>T+i</code>.</p><p>Setting the two fields of <code>S[i]</code> is straightforward. Suppose that the content of the scenarios at time <code>T+i</code> is</p><pre><code class="language-julia hljs">combs*[yields[T+i,:]; macros[T+i, :]] == vals</code></pre><p>Then, users can assign the content to <code>S[i]</code> by executing</p><pre><code class="language-julia hljs">S[i] = Scenario(combinations=combs, values=vals)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../inference/">« Statistical Inference</a><a class="docs-footer-nextpage" href="../output/">Utilization of the Output »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 7 March 2025 04:08">Friday 7 March 2025</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
